[gd_scene load_steps=25 format=3 uid="uid://nybtl84jetwm"]

[ext_resource type="Script" uid="uid://u8kevo1t2wt8" path="res://Levels/stapler_boss_level.gd" id="1_8h5ot"]
[ext_resource type="Texture2D" uid="uid://eu4f1ong3hkb" path="res://Art/minimal-tilemap.png" id="1_itita"]
[ext_resource type="PackedScene" uid="uid://c1d3ighrediwb" path="res://Assets/Bosses/Stapler/Stapler.tscn" id="2_a0lx0"]
[ext_resource type="PackedScene" uid="uid://d01j4f253dh61" path="res://Assets/player.tscn" id="3_ap8pq"]
[ext_resource type="PackedScene" uid="uid://ifcqb0s8pi5o" path="res://Assets/Enemies/Amalgoms/BoltAmalgom.tscn" id="4_7pj46"]
[ext_resource type="Texture2D" uid="uid://dsfmjgknfm48f" path="res://Art/RemoveIdle.png" id="4_a0lx0"]
[ext_resource type="Texture2D" uid="uid://bij0b6y0ekwrj" path="res://Art/RemoverLeaveFrame.png" id="5_ap8pq"]
[ext_resource type="PackedScene" uid="uid://ctwhpgtn77chk" path="res://Assets/Bosses/Stapler/RemoverAttacker.tscn" id="7_7pj46"]
[ext_resource type="PackedScene" uid="uid://b1r015wd0qvah" path="res://Scripts/Global/StateMachine.tscn" id="9_vnnd3"]
[ext_resource type="Script" uid="uid://chpguv0sj71vn" path="res://Assets/Bosses/Stapler/ST_Remover_idle.gd" id="10_vnnd3"]
[ext_resource type="Script" uid="uid://dmul07vyccp86" path="res://Assets/Bosses/Stapler/ST_remover_bite.gd" id="11_wnwvn"]
[ext_resource type="Script" uid="uid://hmypivrk6m5n" path="res://Levels/ST_hold_remover.gd" id="12_s2lie"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8crqk"]
texture = ExtResource("1_itita")
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0 = 0
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:1/0 = 0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:2/0 = 0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:3/0 = 0
1:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:3/0 = 0
3:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSet" id="TileSet_5kdbf"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_8crqk")

[sub_resource type="AtlasTexture" id="AtlasTexture_ap8pq"]
atlas = ExtResource("4_a0lx0")
region = Rect2(0, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_7pj46"]
atlas = ExtResource("4_a0lx0")
region = Rect2(2000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_8h5ot"]
atlas = ExtResource("4_a0lx0")
region = Rect2(4000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_lsp5b"]
atlas = ExtResource("5_ap8pq")
region = Rect2(0, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_l32di"]
atlas = ExtResource("5_ap8pq")
region = Rect2(2000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_vnnd3"]
atlas = ExtResource("5_ap8pq")
region = Rect2(4000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_s2lie"]
atlas = ExtResource("5_ap8pq")
region = Rect2(4000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_wnwvn"]
atlas = ExtResource("5_ap8pq")
region = Rect2(2000, 0, 2000, 2000)

[sub_resource type="AtlasTexture" id="AtlasTexture_5mwbt"]
atlas = ExtResource("5_ap8pq")
region = Rect2(0, 0, 2000, 2000)

[sub_resource type="SpriteFrames" id="SpriteFrames_lsp5b"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ap8pq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7pj46")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8h5ot")
}],
"loop": true,
"name": &"IDLE",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lsp5b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l32di")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vnnd3")
}],
"loop": false,
"name": &"LeaveFrame",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_s2lie")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wnwvn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5mwbt")
}],
"loop": false,
"name": &"ReturnFrame",
"speed": 5.0
}]

[node name="StapplerBoss_Level" type="Node"]
script = ExtResource("1_8h5ot")

[node name="TileMap" type="TileMap" parent="."]
position = Vector2(0, -3)
tile_set = SubResource("TileSet_5kdbf")
format = 2
layer_0/tile_data = PackedInt32Array(458753, 65536, 0, 458754, 65536, 0, 458755, 65536, 0, 458756, 65536, 0, 458757, 65536, 0, 458758, 65536, 0, 458759, 65536, 0, 458760, 65536, 0, 458761, 65536, 0, 458762, 65536, 0, 458763, 65536, 0, 458764, 65536, 0, 458765, 65536, 0, 458766, 65536, 0, 458767, 65536, 0, 458768, 65536, 0, 458781, 65536, 0, 458782, 65536, 0, 458785, 65536, 0, 458784, 65536, 0, 458783, 65536, 0, 458780, 65536, 0, 458779, 65536, 0, 458778, 65536, 0, 458777, 65536, 0, 458776, 65536, 0, 458775, 65536, 0, 458774, 65536, 0, 458773, 65536, 0, 458772, 65536, 0, 458771, 65536, 0, 458770, 65536, 0, 458769, 65536, 0, 524282, 65536, 0, 524283, 65536, 0, 524284, 65536, 0, 524285, 65536, 0, 524286, 65536, 0, 524287, 65536, 0, 458752, 65536, 0, 458786, 65536, 0, 458787, 65536, 0, 458788, 65536, 0, 458789, 65536, 0, 458790, 65536, 0, 458791, 65536, 0, 458792, 65536, 0, 458793, 65536, 0, 458794, 65536, 0, 458795, 65536, 0, 458796, 65536, 0, 458797, 65536, 0, 458798, 65536, 0, 458799, 65536, 0, 458800, 65536, 0, 458801, 65536, 0, 458802, 65536, 0, 458803, 65536, 0, 458804, 65536, 0, 458805, 65536, 0, 458806, 65536, 0, 458807, 65536, 0, 458808, 65536, 0, 458809, 65536, 0, 524281, 65536, 0, 524280, 65536, 0, 524279, 65536, 0, 524278, 65536, 0)

[node name="Stapler" parent="." instance=ExtResource("2_a0lx0")]
position = Vector2(1196, -439)
scale = Vector2(1.4, 1.4)

[node name="Player" parent="." instance=ExtResource("3_ap8pq")]
unique_name_in_owner = true
position = Vector2(553, 14)

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(-2, -153)
zoom = Vector2(0.8, 0.8)

[node name="IdleRemover" type="AnimatedSprite2D" parent="Player"]
unique_name_in_owner = true
position = Vector2(-750, -416.99997)
scale = Vector2(0.7, 0.7)
sprite_frames = SubResource("SpriteFrames_lsp5b")
animation = &"ReturnFrame"
frame = 1

[node name="BoltAmalgom" parent="." instance=ExtResource("4_7pj46")]
position = Vector2(661, 1)
colour_mask_part1 = 2
colour_mask = 3
speed = null
start_dir = null
mass = null

[node name="Remover" parent="." instance=ExtResource("7_7pj46")]
unique_name_in_owner = true
position = Vector2(-621, -890)
scale = Vector2(0.8, 0.8)

[node name="Remover_StateMachine" parent="." node_paths=PackedStringArray("initial_state") instance=ExtResource("9_vnnd3")]
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="Remover_StateMachine"]
script = ExtResource("10_vnnd3")
metadata/_custom_type_script = "uid://ctnkax5hqadai"

[node name="IdleTime" type="Timer" parent="Remover_StateMachine/Idle"]
one_shot = true

[node name="Bite" type="Node" parent="Remover_StateMachine"]
script = ExtResource("11_wnwvn")
metadata/_custom_type_script = "uid://ctnkax5hqadai"

[node name="AttackDelay" type="Timer" parent="Remover_StateMachine/Bite"]
one_shot = true

[node name="Hold" type="Node" parent="Remover_StateMachine"]
script = ExtResource("12_s2lie")
metadata/_custom_type_script = "uid://ctnkax5hqadai"

[node name="HoldDelay" type="Timer" parent="Remover_StateMachine/Hold"]
unique_name_in_owner = true
one_shot = true

[node name="ReturnDelay" type="Timer" parent="Remover_StateMachine/Hold"]
unique_name_in_owner = true
one_shot = true

[connection signal="timeout" from="Remover_StateMachine/Idle/IdleTime" to="Remover_StateMachine/Idle" method="_on_idle_time_timeout"]
[connection signal="timeout" from="Remover_StateMachine/Bite/AttackDelay" to="Remover_StateMachine/Bite" method="_on_attack_delay_timeout"]
[connection signal="timeout" from="Remover_StateMachine/Hold/HoldDelay" to="Remover_StateMachine/Hold" method="_on_hold_delay_timeout"]
[connection signal="timeout" from="Remover_StateMachine/Hold/ReturnDelay" to="Remover_StateMachine/Hold" method="_on_return_delay_timeout"]
